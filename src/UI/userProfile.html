<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Profile Management</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body {
            background-color: #f8f9fa;
        }
        .profile-container {
            margin-top: 30px;
            margin-bottom: 30px;
        }
        .profile-header {
            background-color: #fff;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            padding: 20px;
            margin-bottom: 20px;
        }
        .profile-pic {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            object-fit: cover;
            border: 5px solid #f8f9fa;
        }
        .profile-card {
            background-color: #fff;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            padding: 20px;
            margin-bottom: 20px;
            transition: transform 0.3s;
        }
        .profile-card:hover {
            transform: translateY(-5px);
        }
        .nav-pills .nav-link.active {
            background-color: #0d6efd;
        }
        .package-card {
            border-left: 4px solid #0d6efd;
        }
        .balance-card {
            background: linear-gradient(135deg, #0d6efd, #0dcaf0);
            color: white;
        }
        .form-label {
            font-weight: 500;
        }
        .badge-active {
            background-color: #198754;
        }
        .badge-expired {
            background-color: #dc3545;
        }
    </style>
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-dark bg-primary">
    <div class="container">
        <a class="navbar-brand" href="#">MyService</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ms-auto">
                <li class="nav-item">
                    <a class="nav-link" href="index.html"><i class="fas fa-home"></i> Home</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link active" href="#"><i class="fas fa-user"></i> Profile</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#"><i class="fas fa-cog"></i> Services</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="index.html"><i class="fas fa-sign-out-alt"></i> Logout</a>
                </li>
            </ul>
        </div>
    </div>
</nav>

<div class="container profile-container">
    <!-- Profile Header -->
    <div class="profile-header">
        <div class="row align-items-center">
            <div class="col-md-2 text-center">
                <img src="https://via.placeholder.com/150" alt="Profile Picture" class="profile-pic mb-3">
            </div>
            <div class="col-md-7">
                <h3>John Doe</h3>
                <p><i class="fas fa-envelope me-2"></i>johndoe@example.com</p>
                <p><i class="fas fa-phone me-2"></i>+1 (555) 123-4567</p>
                <p><i class="fas fa-map-marker-alt me-2"></i>New York, USA</p>
            </div>
            <div class="col-md-3 text-end">
                <button class="btn btn-outline-primary"><i class="fas fa-edit me-2"></i>Edit Profile</button>
            </div>
        </div>
    </div>

    <div class="row">
        <!-- Left Sidebar - Navigation -->
        <div class="col-md-3">
            <div class="profile-card">
                <div class="d-flex align-items-center mb-4">
                    <i class="fas fa-user-circle fa-2x text-primary me-3"></i>
                    <h5 class="mb-0">Account Management</h5>
                </div>
                <div class="nav flex-column nav-pills">
                    <a class="nav-link active mb-2" href="#profile" data-bs-toggle="pill">
                        <i class="fas fa-id-card me-2"></i>Profile Details
                    </a>
                    <a class="nav-link mb-2" href="#password" data-bs-toggle="pill">
                        <i class="fas fa-lock me-2"></i>Change Password
                    </a>
                    <a class="nav-link mb-2" href="#packages" data-bs-toggle="pill">
                        <i class="fas fa-box me-2"></i>Activated Packages
                    </a>
                    <a class="nav-link mb-2" href="#balance" data-bs-toggle="pill">
                        <i class="fas fa-wallet me-2"></i>Mobile Reload Balance
                    </a>
                    <a class="nav-link mb-2" href="#settings" data-bs-toggle="pill">
                        <i class="fas fa-cog me-2"></i>Account Settings
                    </a>
                </div>
            </div>

            <!-- Quick Stats Card -->
            <div class="profile-card">
                <h5 class="mb-3">Quick Stats</h5>
                <div class="d-flex justify-content-between mb-3">
                    <span><i class="fas fa-box text-primary me-2"></i>Active Packages</span>
                    <span class="badge bg-primary rounded-pill">3</span>
                </div>
                <div class="d-flex justify-content-between mb-3">
                    <span><i class="fas fa-wallet text-success me-2"></i>Balance</span>
                    <span class="badge bg-success rounded-pill">$45.50</span>
                </div>
                <div class="d-flex justify-content-between">
                    <span><i class="fas fa-history text-info me-2"></i>Last Login</span>
                    <span class="small text-muted">Today, 09:45 AM</span>
                </div>
            </div>
        </div>

        <!-- Main Content Area -->
        <div class="col-md-9">
            <div class="tab-content">
                <!-- Profile Details Tab -->
                <div class="tab-pane fade show active" id="profile">
                    <div class="profile-card">
                        <div class="d-flex justify-content-between align-items-center mb-4">
                            <h4 class="mb-0">Profile Information</h4>
                            <button class="btn btn-sm btn-primary"><i class="fas fa-edit me-1"></i>Edit</button>
                        </div>
                        <form>
                            <div class="row mb-3">
                                <div class="col-md-6">
                                    <label class="form-label">Full Name</label>
                                    <input type="text" class="form-control" value="John" disabled>
                                </div>
<!--                                <div class="col-md-6">-->
<!--                                    <label class="form-label">Last Name</label>-->
<!--                                    <input type="text" class="form-control" value="Doe" disabled>-->
<!--                                </div>-->
                            </div>
                            <div class="row mb-3">
                                <div class="col-md-6">
                                    <label class="form-label">Email Address</label>
                                    <input type="email" class="form-control" value="johndoe@example.com" disabled>
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label">Phone Number</label>
                                    <input type="tel" class="form-control" value="+1 (555) 123-4567" disabled>
                                </div>
                            </div>
<!--                            <div class="row mb-3">-->
<!--                                <div class="col-md-6">-->
<!--                                    <label class="form-label">Date of Birth</label>-->
<!--                                    <input type="date" class="form-control" value="1990-05-15" disabled>-->
<!--                                </div>-->
<!--                                <div class="col-md-6">-->
<!--                                    <label class="form-label">Gender</label>-->
<!--                                    <select class="form-select" disabled>-->
<!--                                        <option>Male</option>-->
<!--                                        <option>Female</option>-->
<!--                                        <option>Other</option>-->
<!--                                    </select>-->
<!--                                </div>-->
<!--                            </div>-->
<!--                            <div class="mb-3">-->
<!--                                <label class="form-label">Address</label>-->
<!--                                <textarea class="form-control" rows="3" disabled>123 Main Street, Apt 4B, New York, NY 10001, USA</textarea>-->
<!--                            </div>-->
                        </form>
                    </div>
                </div>

                <!-- Change Password Tab -->
                <div class="tab-pane fade" id="password">
                    <div class="profile-card">
                        <h4 class="mb-4">Change Password</h4>
                        <form>
                            <div class="mb-3">
                                <label class="form-label">Current Password</label>
                                <input type="password" class="form-control" placeholder="Enter current password">
                            </div>
                            <div class="mb-3">
                                <label class="form-label">New Password</label>
                                <input type="password" class="form-control" placeholder="Enter new password">
                                <div class="progress mt-2" style="height: 5px;">
                                    <div class="progress-bar bg-success" style="width: 70%"></div>
                                </div>
                                <small class="text-muted">Password strength: Strong</small>
                            </div>
                            <div class="mb-3">
                                <label class="form-label">Confirm New Password</label>
                                <input type="password" class="form-control" placeholder="Confirm new password">
                            </div>
                            <div class="mb-3">
                                <div class="alert alert-info">
                                    <i class="fas fa-info-circle me-2"></i>Password must be at least 8 characters long and include uppercase, lowercase, numbers, and special characters.
                                </div>
                            </div>
                            <button type="submit" class="btn btn-primary"><i class="fas fa-lock me-2"></i>Update Password</button>
                        </form>
                    </div>
                </div>

                <!-- Activated Packages Tab -->
                <div class="tab-pane fade" id="packages">
                    <div class="profile-card">
                        <div class="d-flex justify-content-between align-items-center mb-4">
                            <h4 class="mb-0">Your Active Packages</h4>
                            <button class="btn btn-sm btn-primary"><i class="fas fa-plus me-1"></i>Add New Package</button>
                        </div>

                        <div class="package-card p-3 mb-3 border-left border-primary">
                            <div class="row align-items-center">
                                <div class="col-md-7">
                                    <h5>Premium Internet Package</h5>
                                    <p class="mb-1"><i class="fas fa-wifi me-2 text-primary"></i>100 Mbps Unlimited</p>
                                    <p class="mb-0 text-muted small">Activated on: 15 Feb 2025</p>
                                </div>
                                <div class="col-md-3 text-center">
                                    <span class="badge badge-active px-3 py-2 rounded-pill">Active</span>
                                    <p class="mb-0 mt-1 small">Expires in 15 days</p>
                                </div>
                                <div class="col-md-2 text-end">
                                    <button class="btn btn-sm btn-outline-primary">Renew</button>
                                </div>
                            </div>
                        </div>

                        <div class="package-card p-3 mb-3 border-left border-primary">
                            <div class="row align-items-center">
                                <div class="col-md-7">
                                    <h5>TV Streaming Package</h5>
                                    <p class="mb-1"><i class="fas fa-tv me-2 text-primary"></i>HD Channels + Movies</p>
                                    <p class="mb-0 text-muted small">Activated on: 05 Mar 2025</p>
                                </div>
                                <div class="col-md-3 text-center">
                                    <span class="badge badge-active px-3 py-2 rounded-pill">Active</span>
                                    <p class="mb-0 mt-1 small">Expires in 25 days</p>
                                </div>
                                <div class="col-md-2 text-end">
                                    <button class="btn btn-sm btn-outline-primary">Renew</button>
                                </div>
                            </div>
                        </div>

                        <div class="package-card p-3 mb-3 border-left border-primary">
                            <div class="row align-items-center">
                                <div class="col-md-7">
                                    <h5>Mobile Data Bundle</h5>
                                    <p class="mb-1"><i class="fas fa-mobile-alt me-2 text-primary"></i>50GB Monthly Data</p>
                                    <p class="mb-0 text-muted small">Activated on: 20 Mar 2025</p>
                                </div>
                                <div class="col-md-3 text-center">
                                    <span class="badge badge-active px-3 py-2 rounded-pill">Active</span>
                                    <p class="mb-0 mt-1 small">Expires in 20 days</p>
                                </div>
                                <div class="col-md-2 text-end">
                                    <button class="btn btn-sm btn-outline-primary">Renew</button>
                                </div>
                            </div>
                        </div>

                        <div class="package-card p-3 mb-3 border-left border-secondary">
                            <div class="row align-items-center">
                                <div class="col-md-7">
                                    <h5>Gaming Add-on Package</h5>
                                    <p class="mb-1"><i class="fas fa-gamepad me-2 text-secondary"></i>Low Latency Gaming</p>
                                    <p class="mb-0 text-muted small">Activated on: 10 Jan 2025</p>
                                </div>
                                <div class="col-md-3 text-center">
                                    <span class="badge badge-expired px-3 py-2 rounded-pill">Expired</span>
                                    <p class="mb-0 mt-1 small">Expired 20 days ago</p>
                                </div>
                                <div class="col-md-2 text-end">
                                    <button class="btn btn-sm btn-outline-success">Reactivate</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Mobile Reload Balance Tab -->
                <div class="tab-pane fade" id="balance">
                    <div class="row">
                        <div class="col-md-7">
                            <div class="profile-card">
                                <h4 class="mb-4">Reload Balance</h4>
                                <form>
                                    <div class="mb-3">
                                        <label class="form-label">Select Mobile Number</label>
                                        <select class="form-select">
                                            <option>+1 (555) 123-4567 (Primary)</option>
                                            <option>+1 (555) 987-6543 (Secondary)</option>
                                            <option>Add new number</option>
                                        </select>
                                    </div>
                                    <div class="mb-3">
                                        <label class="form-label">Reload Amount</label>
                                        <select class="form-select mb-2">
                                            <option>$10</option>
                                            <option>$20</option>
                                            <option>$30</option>
                                            <option>$50</option>
                                            <option>$100</option>
                                            <option>Custom amount</option>
                                        </select>
                                    </div>
                                    <div class="mb-3">
                                        <label class="form-label">Payment Method</label>
                                        <div class="d-flex mb-3">
                                            <div class="form-check me-3">
                                                <input class="form-check-input" type="radio" name="paymentMethod" id="credit" checked>
                                                <label class="form-check-label" for="credit">
                                                    <i class="fas fa-credit-card me-1 text-primary"></i> Credit Card
                                                </label>
                                            </div>
                                            <div class="form-check me-3">
                                                <input class="form-check-input" type="radio" name="paymentMethod" id="paypal">
                                                <label class="form-check-label" for="paypal">
                                                    <i class="fab fa-paypal me-1 text-primary"></i> PayPal
                                                </label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="radio" name="paymentMethod" id="wallet">
                                                <label class="form-check-label" for="wallet">
                                                    <i class="fas fa-wallet me-1 text-primary"></i> Wallet Balance
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <button type="submit" class="btn btn-primary">Reload Now</button>
                                </form>
                            </div>
                        </div>
                        <div class="col-md-5">
                            <div class="balance-card profile-card">
                                <div class="text-center mb-3">
                                    <i class="fas fa-wallet fa-3x mb-3"></i>
                                    <h4>Current Balance</h4>
                                    <h2 class="mb-0">$45.50</h2>
                                </div>
                                <hr class="my-3 bg-white opacity-25">
                                <div>
                                    <h5 class="mb-3">Recent Transactions</h5>
                                    <div class="d-flex justify-content-between mb-2">
                                        <span><i class="fas fa-arrow-up me-2"></i>Reload</span>
                                        <span>+$20.00</span>
                                    </div>
                                    <div class="d-flex justify-content-between mb-2">
                                        <span><i class="fas fa-arrow-down me-2"></i>Data Bundle</span>
                                        <span>-$10.00</span>
                                    </div>
                                    <div class="d-flex justify-content-between">
                                        <span><i class="fas fa-arrow-up me-2"></i>Promo Credit</span>
                                        <span>+$5.50</span>
                                    </div>
                                </div>
                                <div class="text-center mt-4">
                                    <button class="btn btn-light btn-sm">View All Transactions</button>
                                </div>
                            </div>

                            <div class="profile-card">
                                <h5 class="mb-3">Auto-Reload Settings</h5>
                                <div class="form-check form-switch mb-3">
                                    <input class="form-check-input" type="checkbox" id="autoReload" checked>
                                    <label class="form-check-label" for="autoReload">Enable Auto-Reload</label>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label small">When balance falls below</label>
                                    <select class="form-select form-select-sm">
                                        <option>$5</option>
                                        <option selected>$10</option>
                                        <option>$15</option>
                                        <option>$20</option>
                                    </select>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label small">Reload amount</label>
                                    <select class="form-select form-select-sm">
                                        <option>$10</option>
                                        <option selected>$20</option>
                                        <option>$30</option>
                                        <option>$50</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Settings Tab -->
                <div class="tab-pane fade" id="settings">
                    <div class="profile-card">
                        <h4 class="mb-4">Account Settings</h4>
                        <form>
                            <h5 class="border-bottom pb-2 mb-3">Notifications</h5>
                            <div class="mb-3">
                                <div class="form-check form-switch mb-2">
                                    <input class="form-check-input" type="checkbox" id="emailNotif" checked>
                                    <label class="form-check-label" for="emailNotif">Email Notifications</label>
                                </div>
                                <div class="form-check form-switch mb-2">
                                    <input class="form-check-input" type="checkbox" id="smsNotif" checked>
                                    <label class="form-check-label" for="smsNotif">SMS Notifications</label>
                                </div>
                                <div class="form-check form-switch mb-2">
                                    <input class="form-check-input" type="checkbox" id="appNotif">
                                    <label class="form-check-label" for="appNotif">Push Notifications</label>
                                </div>
                            </div>

                            <h5 class="border-bottom pb-2 mb-3 mt-4">Privacy</h5>
                            <div class="mb-3">
                                <div class="form-check form-switch mb-2">
                                    <input class="form-check-input" type="checkbox" id="twoFactor">
                                    <label class="form-check-label" for="twoFactor">Enable Two-Factor Authentication</label>
                                </div>
                                <div class="form-check form-switch mb-2">
                                    <input class="form-check-input" type="checkbox" id="privacy" checked>
                                    <label class="form-check-label" for="privacy">Activity Privacy</label>
                                </div>
                            </div>

                            <h5 class="border-bottom pb-2 mb-3 mt-4">Account Control</h5>
                            <div class="mb-3">
                                <a href="#" class="btn btn-outline-warning mb-2"><i class="fas fa-download me-2"></i>Download My Data</a>
                                <a href="#" class="btn btn-outline-danger"><i class="fas fa-user-times me-2"></i>Deactivate Account</a>
                            </div>

                            <button type="submit" class="btn btn-primary mt-3">Save Settings</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<footer class="bg-light py-4 mt-5">
    <div class="container text-center">
        <p class="mb-0">Â© 2025 MyService. All rights reserved.</p>
        <div class="mt-2">
            <a href="#" class="text-decoration-none text-muted me-3">Privacy Policy</a>
            <a href="#" class="text-decoration-none text-muted me-3">Terms of Service</a>
            <a href="#" class="text-decoration-none text-muted">Contact Us</a>
        </div>
    </div>
</footer>

<!-- Bootstrap Bundle with Popper -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
// Add this script at the bottom of userProfile.html, before the closing </body> tag
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const profileData = JSON.parse(localStorage.getItem('userProfile'));
        const authToken = localStorage.getItem('authToken');

        // if (!profileData || !authToken) {
        //     window.location.href = 'login.html';
        //     return;
        // }

        // Populate profile header
        document.querySelector('.profile-header h3').textContent =
            `${profileData.firstName} ${profileData.lastName || ''}`.trim();
        document.querySelector('.profile-header p:nth-of-type(1)').innerHTML =
            `<i class="fas fa-envelope me-2"></i>${profileData.email}`;
        document.querySelector('.profile-header p:nth-of-type(2)').innerHTML =
            `<i class="fas fa-phone me-2"></i>${profileData.phone || 'N/A'}`;

        // Populate form fields
        document.querySelector('#profile input[type="text"]').value = profileData.firstName || '';
        document.querySelector('#profile input[type="email"]').value = profileData.email || '';
        document.querySelector('#profile input[type="tel"]').value = profileData.phone || '';

        // Add edit functionality
        document.querySelector('#profile button').addEventListener('click', function(e) {
            e.preventDefault();
            const formInputs = document.querySelectorAll('#profile input');
            const isEditing = this.innerHTML.includes('Edit');

            formInputs.forEach(input => {
                input.disabled = !isEditing;
            });

            if (isEditing) {
                this.innerHTML = '<i class="fas fa-save me-1"></i>Save';
            } else {
                const updatedData = {
                    firstName: document.querySelector('#profile input[type="text"]').value,
                    phone: document.querySelector('#profile input[type="tel"]').value
                };

                fetch('http://localhost:8080/api/v1/user/update', {
                    method: 'PUT',
                    headers: {
                        'Authorization': `Bearer ${authToken}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(updatedData)
                })
                    .then(response => {
                        if (!response.ok) throw new Error('Update failed');
                        return response.json();
                    })
                    .then(data => {
                        alert('Profile updated successfully');
                        localStorage.setItem('userProfile', JSON.stringify({
                            ...profileData,
                            ...updatedData
                        }));
                        location.reload();
                    })
                    .catch(error => {
                        console.error('Error:', error);
                        alert('Failed to update profile');
                    });

                this.innerHTML = '<i class="fas fa-edit me-1"></i>Edit';
            }
        });
    });
</script>
</body>
</html>