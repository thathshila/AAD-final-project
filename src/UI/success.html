

<!--<!DOCTYPE html>-->
<!--<html lang="en">-->
<!--<head>-->
<!--    <meta charset="UTF-8">-->
<!--    <meta name="viewport" content="width=device-width, initial-scale=1.0">-->
<!--    <title>Payment Successful</title>-->
<!--    <style>-->
<!--        body {-->
<!--            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;-->
<!--            background-color: #f8f9fa;-->
<!--            margin: 0;-->
<!--            padding: 0;-->
<!--            display: flex;-->
<!--            justify-content: center;-->
<!--            align-items: center;-->
<!--            min-height: 100vh;-->
<!--        }-->
<!--        .success-container {-->
<!--            background-color: white;-->
<!--            border-radius: 8px;-->
<!--            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);-->
<!--            width: 90%;-->
<!--            max-width: 600px;-->
<!--            padding: 40px;-->
<!--            text-align: center;-->
<!--        }-->
<!--        .success-icon {-->
<!--            width: 80px;-->
<!--            height: 80px;-->
<!--            background-color: #28a745;-->
<!--            border-radius: 50%;-->
<!--            display: flex;-->
<!--            justify-content: center;-->
<!--            align-items: center;-->
<!--            margin: 0 auto 20px;-->
<!--        }-->
<!--        .checkmark {-->
<!--            width: 40px;-->
<!--            height: 40px;-->
<!--        }-->
<!--        h1 {-->
<!--            color: #212529;-->
<!--            margin-bottom: 20px;-->
<!--        }-->
<!--        .success-message {-->
<!--            color: #6c757d;-->
<!--            font-size: 18px;-->
<!--            margin-bottom: 30px;-->
<!--        }-->
<!--        .order-details {-->
<!--            background-color: #f8f9fa;-->
<!--            border-radius: 6px;-->
<!--            padding: 20px;-->
<!--            margin-bottom: 30px;-->
<!--            text-align: left;-->
<!--        }-->
<!--        .detail-row {-->
<!--            display: flex;-->
<!--            justify-content: space-between;-->
<!--            margin-bottom: 12px;-->
<!--        }-->
<!--        .detail-label {-->
<!--            font-weight: 600;-->
<!--            color: #495057;-->
<!--        }-->
<!--        .detail-value {-->
<!--            color: #212529;-->
<!--        }-->
<!--        .back-button {-->
<!--            background-color: #007bff;-->
<!--            color: white;-->
<!--            border: none;-->
<!--            padding: 12px 24px;-->
<!--            border-radius: 4px;-->
<!--            font-size: 16px;-->
<!--            cursor: pointer;-->
<!--            transition: background-color 0.3s;-->
<!--        }-->
<!--        .back-button:hover {-->
<!--            background-color: #0069d9;-->
<!--        }-->
<!--        .receipt-link {-->
<!--            display: block;-->
<!--            margin-top: 20px;-->
<!--            color: #007bff;-->
<!--            text-decoration: none;-->
<!--        }-->
<!--        .receipt-link:hover {-->
<!--            text-decoration: underline;-->
<!--        }-->
<!--        .footer {-->
<!--            margin-top: 40px;-->
<!--            font-size: 14px;-->
<!--            color: #6c757d;-->
<!--        }-->
<!--    </style>-->

<!--</head>-->
<!--<body>-->
<!--<div class="success-container">-->
<!--    <div class="success-icon">-->
<!--        <svg class="checkmark" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 52 52">-->
<!--            <path fill="none" stroke="white" stroke-width="5" d="M14.1 27.2l7.1 7.2 16.7-16.8"/>-->
<!--        </svg>-->
<!--    </div>-->

<!--    <h1>Payment Successful!</h1>-->
<!--    <p class="success-message">Thank you for your purchase. Your transaction has been completed successfully.</p>-->

<!--    <div class="order-details">-->
<!--        <div class="detail-row">-->
<!--            <span class="detail-label">Order Number:</span>-->
<!--            <span class="detail-value"></span>-->
<!--        </div>-->
<!--        <div class="detail-row">-->
<!--            <span class="detail-label">Date:</span>-->
<!--            <span class="detail-value"></span>-->
<!--        </div>-->
<!--        <div class="detail-row">-->
<!--            <span class="detail-label">Payment Method:</span>-->
<!--            <span class="detail-value" id="payment-method"></span>-->
<!--        </div>-->
<!--        <div class="detail-row">-->
<!--            <span class="detail-label">Amount Paid:</span>-->
<!--            <span class="detail-value"></span>-->
<!--        </div>-->
<!--    </div>-->

<!--    <button class="back-button">Continue Shopping</button>-->
<!--    <a href="#" class="receipt-link">Download Receipt</a>-->

<!--    <div class="footer">-->
<!--        <p>A confirmation email has been sent to your registered email address.</p>-->
<!--        <p>If you have any questions, please contact our support team.</p>-->
<!--    </div>-->
<!--</div>-->

<!--<script>-->
<!--    // Add this to the success.html page-->
<!--    document.addEventListener('DOMContentLoaded', function() {-->
<!--        // Get order details from URL parameters-->
<!--        const urlParams = new URLSearchParams(window.location.search);-->
<!--        const orderId = urlParams.get('orderId');-->
<!--        const cardName = urlParams.get('cardName');-->
<!--        const cardLastFour = urlParams.get('cardNumber');-->

<!--        // Display order details-->
<!--        document.querySelector('.detail-value:nth-of-type(1)').textContent = `#${orderId}`;-->

<!--        // Set current date-->
<!--        const currentDate = new Date();-->
<!--        const formattedDate = currentDate.toLocaleDateString('en-US', {-->
<!--            year: 'numeric',-->
<!--            month: 'long',-->
<!--            day: 'numeric'-->
<!--        });-->
<!--        document.querySelector('.detail-value:nth-of-type(2)').textContent = formattedDate;-->

<!--        // Set payment method-->
<!--        const paymentMethod = cardName + ' ending in ' + cardLastFour;-->
<!--        document.getElementById('payment-method').textContent = paymentMethod;-->

<!--        // Set amount from localStorage if available-->
<!--        const amount = localStorage.getItem('checkout_amount');-->
<!--        if (amount) {-->
<!--            document.querySelector('.detail-value:nth-of-type(4)').textContent = `$${amount}`;-->
<!--        }-->

<!--        // Clear cart and checkout data-->
<!--        localStorage.removeItem('cartItems');-->
<!--        localStorage.removeItem('checkout_item_details');-->
<!--        localStorage.removeItem('checkout_amount');-->
<!--        localStorage.removeItem('checkout_order_id');-->

<!--        // Continue shopping button handler-->
<!--        document.querySelector('.back-button').addEventListener('click', function() {-->
<!--            window.location.href = 'index.html';-->
<!--        });-->

<!--        // Download receipt handler-->
<!--        document.querySelector('.receipt-link').addEventListener('click', function(e) {-->
<!--            e.preventDefault();-->
<!--            // Could implement PDF generation or just alert for now-->
<!--            alert('Receipt download functionality would be implemented here');-->
<!--        });-->
<!--    });-->
<!--</script>-->
<!--</body>-->
<!--</html>-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Payment Successful</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f8f9fa;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }
        .success-container {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            width: 90%;
            max-width: 600px;
            padding: 40px;
            text-align: center;
        }
        .success-icon {
            width: 80px;
            height: 80px;
            background-color: #28a745;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 0 auto 20px;
        }
        .checkmark {
            width: 40px;
            height: 40px;
        }
        h1 {
            color: #212529;
            margin-bottom: 20px;
        }
        .success-message {
            color: #6c757d;
            font-size: 18px;
            margin-bottom: 30px;
        }
        .order-details {
            background-color: #f8f9fa;
            border-radius: 6px;
            padding: 20px;
            margin-bottom: 30px;
            text-align: left;
        }
        .detail-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 12px;
        }
        .detail-label {
            font-weight: 600;
            color: #495057;
        }
        .detail-value {
            color: #212529;
        }
        .back-button {
            background-color: #007bff;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 4px;
            font-size: 16px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .back-button:hover {
            background-color: #0069d9;
        }
        .receipt-link {
            display: block;
            margin-top: 20px;
            color: #007bff;
            text-decoration: none;
        }
        .receipt-link:hover {
            text-decoration: underline;
        }
        .footer {
            margin-top: 40px;
            font-size: 14px;
            color: #6c757d;
        }
        .order-summary {
            margin-bottom: 30px;
            text-align: left;
        }
        .order-summary h3 {
            color: #212529;
            margin-bottom: 15px;
        }
        .item-table {
            width: 100%;
            border-collapse: collapse;
        }
        .item-table th, .item-table td {
            padding: 8px 12px;
            border-bottom: 1px solid #dee2e6;
        }
        .item-table th {
            background-color: #f8f9fa;
            font-weight: 600;
            text-align: left;
        }
        .text-right {
            text-align: right;
        }
        .customer-info {
            margin-bottom: 30px;
            text-align: left;
        }
    </style>
</head>
<body>
<div class="success-container">
    <div class="success-icon">
        <svg class="checkmark" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 52 52">
            <path fill="none" stroke="white" stroke-width="5" d="M14.1 27.2l7.1 7.2 16.7-16.8"/>
        </svg>
    </div>

    <h1>Payment Successful!</h1>
    <p class="success-message">Thank you for your purchase. Your transaction has been completed successfully.</p>

    <div class="order-details">
        <div class="detail-row">
            <span class="detail-label">Order Number:</span>
            <span class="detail-value" id="order-id"></span>
        </div>
        <div class="detail-row">
            <span class="detail-label">Date:</span>
            <span class="detail-value" id="order-date"></span>
        </div>
        <div class="detail-row">
            <span class="detail-label">Payment Method:</span>
            <span class="detail-value" id="payment-method"></span>
        </div>
        <div class="detail-row">
            <span class="detail-label">Amount Paid:</span>
            <span class="detail-value" id="amount-paid"></span>
        </div>
    </div>

    <div class="order-summary">
        <h3>Order Summary</h3>
        <table class="item-table" id="items-table">
            <thead>
            <tr>
                <th>Item</th>
                <th>Quantity</th>
                <th class="text-right">Price</th>
                <th class="text-right">Total</th>
            </tr>
            </thead>
            <tbody id="items-table-body">
            <!-- Items will be populated by JavaScript -->
            </tbody>
            <tfoot>
            <tr>
                <th colspan="3" class="text-right">Total Amount:</th>
                <th class="text-right" id="total-amount"></th>
            </tr>
            </tfoot>
        </table>
    </div>

    <div class="customer-info">
        <h3>Customer Information</h3>
        <div class="detail-row">
            <span class="detail-label">Name:</span>
            <span class="detail-value" id="customer-name"></span>
        </div>
        <div class="detail-row">
            <span class="detail-label">Email:</span>
            <span class="detail-value" id="customer-email"></span>
        </div>
    </div>

    <button class="back-button" id="continue-shopping" onclick="window.location.href = 'index.html'">Continue Shopping</button>
    <a href="#" class="receipt-link" id="download-receipt">Download Receipt</a>

    <div class="footer">
        <p>A confirmation email has been sent to your registered email address.</p>
        <p>If you have any questions, please contact our support team.</p>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {

        const urlParams = new URLSearchParams(window.location.search);
        const orderId = urlParams.get('orderId') || localStorage.getItem('checkout_order_id');
        const cardName = urlParams.get('cardName');
        const cardLastFour = urlParams.get('cardNumber');


        const amount = localStorage.getItem('checkout_amount');
        const paymentId = localStorage.getItem('payment_id');
        const paymentDate = localStorage.getItem('payment_date');
        const paymentMethod = localStorage.getItem('payment_method');


        const firstName = localStorage.getItem('checkout_first_name');
        const lastName = localStorage.getItem('checkout_last_name');
        const email = localStorage.getItem('checkout_email');
        const phone = localStorage.getItem('checkout_phone');
        const address = localStorage.getItem('checkout_address');
        const city = localStorage.getItem('checkout_city');
        const country = localStorage.getItem('checkout_country');

        document.getElementById('order-id').textContent = `#${orderId || 'N/A'}`;

        const currentDate = paymentDate ? new Date(paymentDate) : new Date();
        const formattedDate = currentDate.toLocaleDateString('en-US', {
            year: 'numeric',
            month: 'long',
            day: 'numeric',
            hour: '2-digit',
            minute: '2-digit'
        });
        document.getElementById('order-date').textContent = formattedDate;

        let displayPaymentMethod = 'Credit Card';
        if (paymentMethod) {
            displayPaymentMethod = paymentMethod.charAt(0).toUpperCase() + paymentMethod.slice(1);
        }
        if (cardName && cardLastFour) {
            displayPaymentMethod += ` (${cardName} ending in ${cardLastFour})`;
        }
        document.getElementById('payment-method').textContent = displayPaymentMethod;

        if (amount) {
            document.getElementById('amount-paid').textContent = `$${parseFloat(amount).toFixed(2)}`;
            document.getElementById('total-amount').textContent = `$${parseFloat(amount).toFixed(2)}`;
        } else {
            document.getElementById('amount-paid').textContent = 'N/A';
            document.getElementById('total-amount').textContent = 'N/A';
        }

        if (firstName && lastName) {
            document.getElementById('customer-name').textContent = `${firstName} ${lastName}`;
        } else {
            document.getElementById('customer-name').textContent = cardName || 'N/A';
        }

        document.getElementById('customer-email').textContent = email || 'N/A';
        document.getElementById('customer-phone').textContent = phone || 'N/A';

        let fullAddress = 'N/A';
        if (address) {
            fullAddress = address;
            if (city) fullAddress += `, ${city}`;
            if (country) fullAddress += `, ${country}`;
        }
        document.getElementById('customer-address').textContent = fullAddress;

        const itemsTableBody = document.getElementById('items-table-body');
        try {
            const itemDetails = JSON.parse(localStorage.getItem('checkout_item_details') || '[]');

            if (itemDetails.length > 0) {
                itemDetails.forEach(item => {
                    const itemPrice = parseFloat(item.price || 0);
                    const itemQuantity = parseInt(item.quantity || 1);
                    const itemTotal = itemPrice * itemQuantity;

                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${item.name || 'Product'} ${item.color ? `(${item.color})` : ''} ${item.storage ? `(${item.storage})` : ''}</td>
                        <td>${itemQuantity}</td>
                        <td class="text-right">$${itemPrice.toFixed(2)}</td>
                        <td class="text-right">$${itemTotal.toFixed(2)}</td>
                    `;
                    itemsTableBody.appendChild(row);
                });
            } else {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>Order Items</td>
                    <td>1</td>
                    <td class="text-right">$${parseFloat(amount || 0).toFixed(2)}</td>
                    <td class="text-right">$${parseFloat(amount || 0).toFixed(2)}</td>
                `;
                itemsTableBody.appendChild(row);
            }
        } catch (error) {
            console.error('Error displaying item details:', error);
            const row = document.createElement('tr');
            row.innerHTML = `
                <td>Order Items</td>
                <td>1</td>
                <td class="text-right">$${parseFloat(amount || 0).toFixed(2)}</td>
                <td class="text-right">$${parseFloat(amount || 0).toFixed(2)}</td>
            `;
            itemsTableBody.appendChild(row);
        }

        document.getElementById('continue-shopping').addEventListener('click', function() {
            window.location.href = 'index.html';
        });

        document.getElementById('download-receipt').addEventListener('click', function(e) {
            e.preventDefault();
            window.print();
        });


        localStorage.removeItem('cartItems');
        // Keep the data for now (for debugging) - in production, you might want to clear it
        // localStorage.removeItem('checkout_item_details');
        // localStorage.removeItem('checkout_amount');
        // localStorage.removeItem('checkout_order_id');
        // localStorage.removeItem('payment_id');
        // localStorage.removeItem('payment_method');
    });
</script>
</body>
</html>